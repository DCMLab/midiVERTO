{"version":3,"sources":["Navbar.js","pages/Home.js","pages/Theory.js","Wavescape.js","WavescapeModule.js","ResolutionSelector.js","colorMapping.js","Circle.js","prototypesData.js","CoefficientsModule.js","PcvChipsBox.js","Player.js","DFT.js","getDftMatrices.js","pages/Application.js","parser.js","App.js","index.js"],"names":["Navbar","Box","sx","flexGrow","AppBar","position","Toolbar","Typography","variant","component","ButtonGroup","Button","Link","to","color","Home","Theory","Wavescape","wavescapeMatrix","canvasRef","useRef","width","height","useEffect","canvas","current","ctx","getContext","devicePixelRatio","scale","style","baseSubdivision","margins","innerSize","length","clearRect","setTransform","ticks","i","j","beginPath","moveTo","x","y","lineTo","fillStyle","fill","drawWavescape","innerWidth","innerHeight","marginLeft","marginTop","unit","mat","temp","push","computeTicks","ref","WavescapeModule","wavescapesData","useState","showModule","setShowModule","Switch","onChange","checked","Collapse","in","map","data","ResolutionSelector","resolutionMode","setResolutionMode","isInputSecondsInvalid","setIsInputSecondsInvalid","resolutionTextRef","FormControl","FormLabel","RadioGroup","row","defaultValue","event","newResolutionMode","seconds","parseFloat","value","target","noteResolutionValue","useSeconds","name","FormControlLabel","control","Radio","label","TextField","error","helperText","id","size","isNaN","inputRef","contToDiscRGB","d3","domain","range","pixelColor","distance","r","g","b","angle","Math","atan2","PI","math","a","getRgbaFromComplex","complex","polarComplex","toPolar","phi","mod","ris","gradient","slice","Circle","protoDataCoeff","traceDataCoeff","userPcvsCoeff","currentSubdiv","performanceCoeff","circleRadius","marksRadiusRatio","radius","floor","image","createImageData","sqrt","index","rgba","putImageData","getImageData","circleMark","pcvData","radiusScaleWidth","opacity","mark","innerRadius","outerRadius","startAngle","endAngle","transform","fillOpacity","d","zIndex","pcv","scaleRatio","labelName","subSup","isSub","includes","dxOffset","dyOffset","sign","textAnchor","dx","dy","fontSize","baselineShift","protoCircleMark","highlight","opacityArray","reverse","coeff","highlightSubdiv","isDisabled","prototypesData","CoefficientsModule","coeffTracesData","showPrototypes","userPcvs","midiDevNotesDftCoeffs","selectedProtoPitchClasses","setSelectedProtoPitchClasses","subdivUserPcvs","setSubdivUserPcvs","tempSubdivUserPcvs","coeffs","re","im","colours","console","log","ListItem","styled","margin","theme","spacing","PcvChipsBox","setUserPcvs","Paper","display","justifyContent","flexWrap","listStyle","p","m","Chip","icon","onDelete","chipToDelete","chips","filter","chip","onClick","setPlayerMidiData","midiData","resolution","setCurrentSubdiv","Tone","cancel","stop","partNotes","tracks","forEach","track","notes","note","subdiv","time","sampler","triggerAttackRelease","duration","velocity","start","urls","A0","C1","A1","C2","A2","C3","A3","C4","A4","C5","A5","C6","A6","C7","A7","C8","release","baseUrl","toDestination","Player","IconButton","children","pause","state","resume","volume","dft","normalize","round","polar","N","k","n","norm","sumAndNormalize","sum","Pcv","this","C","Cs","D","Ds","E","F","Fs","G","Gs","A","As","B","targetPitch","getDftCoeffDynamic","currentSongBPM","tracksSubdivision","instrument","percussion","getSubdivision","pcvSubdivision","pitch","addNoteDuration","dftCoeffsSubdivision","getPcvAsArray","dftCoeffsMatrix","traces","firstRow","tracesData","subdivision","wndLen","cursor","isValidNote","noteAndDuration","getComplementaryColours","rho","pow","hexa","Object","keys","key","hexadecimal","toString","colorToHex","join","rgbaToHexa","currentSongMidiData","Application","setWavescapesData","setCoeffTracesData","setShowPrototypes","pcvTextRef","file","setFile","setMidiDevNotesDftCoeffs","isInputPcvInvalid","setIsInputPcvInvalid","handleSubmitPitchClass","input","parsedInput","userPcvObjects","pcvs","isGroup","isSet","stringGroup","Error","numeralInput","count","num","lastNum","bin","parse","message","pcvObj","document","getElementById","files","fileReader","FileReader","readAsArrayBuffer","onload","loadedFile","binMidiFile","Midi","tempos","header","tempo","bpm","midiBpm","max","nonPercussiveTracks","getMidiFileDataObject","result","staticResolution","matrixHeight","rowsWidth","wndLenUnits","windowed","rgbaMatrices","matrix","getRgbaMatrix","midiFile","getDftCoeffStatic","currentNotes","handleInput","command","toNote","triggerAttack","triggerRelease","currentNote","playedNotes","dftCoeffs","computeDftCoeffs","updateDevices","port","manufacturer","type","navigator","requestMIDIAccess","then","midiAccess","onstatechange","inputs","onmidimessage","Container","FormGroup","noValidate","autoComplete","onKeyPress","htmlFor","e","Divider","App","CssBaseline","basename","process","exact","path","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.d9fbf97b.chunk.js","sourcesContent":["import React from 'react';\r\nimport AppBar from '@mui/material/AppBar';\r\nimport Box from '@mui/material/Box';\r\nimport Toolbar from '@mui/material/Toolbar';\r\nimport Typography from '@mui/material/Typography';\r\nimport Button from '@mui/material/Button';\r\nimport ButtonGroup from '@mui/material/ButtonGroup';\r\nimport { Link } from 'react-router-dom';\r\n\r\nexport default function Navbar() {\r\n  return (\r\n    <Box sx={{ flexGrow: 1 }}>\r\n      <AppBar position='static'>\r\n        <Toolbar>\r\n          <Typography variant='h3' component='div' sx={{ flexGrow: 1 }}>\r\n            Mi_DFT\r\n          </Typography>\r\n          <ButtonGroup variant='outlined' aria-label='outlined button group'>\r\n            <Button component={Link} to='/' variant='contained' color='primary'>\r\n              Home\r\n            </Button>\r\n            <Button\r\n              component={Link}\r\n              to='/theory'\r\n              variant='contained'\r\n              color='primary'\r\n            >\r\n              Theory\r\n            </Button>\r\n            <Button\r\n              component={Link}\r\n              to='/analysis'\r\n              variant='contained'\r\n              color='primary'\r\n            >\r\n              Analysis\r\n            </Button>\r\n          </ButtonGroup>\r\n        </Toolbar>\r\n      </AppBar>\r\n    </Box>\r\n  );\r\n}\r\n","export default function Home() {\r\n  return (\r\n    <div>\r\n      <h1>Home - Theory and analysis</h1>\r\n      <p>\r\n        Lorem ipsum dolor sit amet consectetur adipisicing elit. Beatae,\r\n        architecto temporibus laboriosam, atque veniam quod provident minus eos\r\n        aspernatur ipsa ad nihil veritatis ea, eaque amet! Itaque cupiditate\r\n        laudantium neque voluptas necessitatibus quidem perspiciatis molestias\r\n        dolores possimus. Veritatis perferendis, quidem molestiae ipsa\r\n        reprehenderit aperiam harum iste obcaecati doloribus, recusandae\r\n        adipisci et saepe non qui illum ratione nemo amet voluptates dolore\r\n        exercitationem provident. Ea sed incidunt cum eum excepturi vitae\r\n        consequuntur eius quam earum? Repudiandae explicabo incidunt molestiae\r\n        animi. Quibusdam veniam rerum minima error, quos voluptas incidunt. Est\r\n        ex nesciunt ea id, dolor harum nemo quo quibusdam molestias dicta quae\r\n        modi inventore. Sit dicta iure voluptatum modi. Recusandae harum\r\n        blanditiis in dolore quasi officiis minus quos veritatis eveniet\r\n        corporis eaque odio esse deserunt dolorum quod qui tempore, asperiores\r\n        repellat numquam dolorem nobis! Provident soluta officiis temporibus\r\n        optio, sapiente aspernatur accusantium ipsam velit necessitatibus natus\r\n        placeat obcaecati consectetur quia. Reiciendis ipsum tempora non, dicta\r\n        quod nesciunt. Magni, harum laudantium inventore omnis fugiat quia\r\n        explicabo temporibus itaque officiis minus autem cumque! Necessitatibus\r\n        dolorum aliquid omnis, sed ullam voluptatem reiciendis voluptate. Ad\r\n        minima voluptatem praesentium totam eum consequuntur reiciendis quae\r\n        soluta ipsam cupiditate? Officia labore modi illum libero error ad fugit\r\n        sit nostrum, totam esse magnam doloremque repellendus. Similique, iure\r\n        sed voluptatem quia molestiae aut incidunt facilis sequi! Veniam\r\n        cupiditate optio magnam officiis cumque beatae laudantium, quas natus at\r\n        aliquid nostrum, voluptatem aliquam quia doloremque, fugit fuga facere\r\n        esse. Nostrum numquam nam, praesentium iusto accusamus quasi delectus\r\n        rem vero laborum, optio blanditiis commodi id quidem beatae in.\r\n        Laudantium fugit aspernatur impedit quam maiores officiis! Odit, est\r\n        quae obcaecati repudiandae modi aliquid corporis natus dolores harum\r\n        porro perferendis magni nam. Aperiam provident accusamus soluta optio\r\n        eaque incidunt, quos modi nulla eligendi quo unde ipsa. Maxime\r\n        distinctio minus beatae consequuntur assumenda ab vitae pariatur.\r\n        Commodi maiores eius esse totam accusantium molestiae accusamus quas\r\n        fugiat placeat quaerat voluptate corrupti architecto sapiente reiciendis\r\n        obcaecati molestias, at tempore quisquam! Quam ratione aliquid quo illo\r\n        delectus eaque quae reiciendis dicta corporis obcaecati, nesciunt\r\n        veritatis molestiae impedit ut mollitia nam quisquam in aut quia nemo.\r\n        Ducimus nulla assumenda numquam debitis recusandae dicta quam amet\r\n        dolores, reprehenderit reiciendis ipsum sapiente sit alias obcaecati\r\n        praesentium consequatur ipsa natus iste distinctio officia vel fugiat\r\n        dolore delectus. Molestiae vero omnis blanditiis perspiciatis quibusdam,\r\n        ipsam quo fugiat sunt pariatur minima aperiam ratione, unde distinctio\r\n        porro incidunt praesentium repellendus aliquam autem dolores natus. Ab\r\n        corporis earum veniam corrupti neque aperiam! Perferendis, eligendi,\r\n        praesentium totam quia excepturi exercitationem dolores debitis cumque\r\n        optio consectetur et suscipit cupiditate fuga nam commodi minima\r\n        molestiae odit consequatur id enim aut quisquam eum. Modi dolores fuga\r\n        neque praesentium repellendus, aspernatur ea quod? Corporis quaerat,\r\n        nobis culpa quod nesciunt eum distinctio itaque cumque molestias\r\n        impedit, deleniti delectus. Eum repellat architecto velit delectus eius\r\n        praesentium, temporibus a nobis ad unde quaerat minus illum eos culpa\r\n        earum possimus? Doloribus nostrum, impedit aut, officia amet at fuga\r\n        velit minima tempora, harum molestiae non nisi quia maxime? Odio quo\r\n        reiciendis nostrum repudiandae, alias delectus aut ullam quisquam. Eius?\r\n      </p>\r\n    </div>\r\n  );\r\n}\r\n","export default function Theory() {\r\n  return (\r\n    <div>\r\n      <h1>Theory page</h1>\r\n      <p>\r\n        Lorem ipsum dolor sit amet consectetur adipisicing elit. Beatae,\r\n        architecto temporibus laboriosam, atque veniam quod provident minus eos\r\n        aspernatur ipsa ad nihil veritatis ea, eaque amet! Itaque cupiditate\r\n        laudantium neque voluptas necessitatibus quidem perspiciatis molestias\r\n        dolores possimus. Veritatis perferendis, quidem molestiae ipsa\r\n        reprehenderit aperiam harum iste obcaecati doloribus, recusandae\r\n        adipisci et saepe non qui illum ratione nemo amet voluptates dolore\r\n        exercitationem provident. Ea sed incidunt cum eum excepturi vitae\r\n        consequuntur eius quam earum? Repudiandae explicabo incidunt molestiae\r\n        animi. Quibusdam veniam rerum minima error, quos voluptas incidunt. Est\r\n        ex nesciunt ea id, dolor harum nemo quo quibusdam molestias dicta quae\r\n        modi inventore. Sit dicta iure voluptatum modi. Recusandae harum\r\n        blanditiis in dolore quasi officiis minus quos veritatis eveniet\r\n        corporis eaque odio esse deserunt dolorum quod qui tempore, asperiores\r\n        repellat numquam dolorem nobis! Provident soluta officiis temporibus\r\n        optio, sapiente aspernatur accusantium ipsam velit necessitatibus natus\r\n        placeat obcaecati consectetur quia. Reiciendis ipsum tempora non, dicta\r\n        quod nesciunt. Magni, harum laudantium inventore omnis fugiat quia\r\n        explicabo temporibus itaque officiis minus autem cumque! Necessitatibus\r\n        dolorum aliquid omnis, sed ullam voluptatem reiciendis voluptate. Ad\r\n        minima voluptatem praesentium totam eum consequuntur reiciendis quae\r\n        soluta ipsam cupiditate? Officia labore modi illum libero error ad fugit\r\n        sit nostrum, totam esse magnam doloremque repellendus. Similique, iure\r\n        sed voluptatem quia molestiae aut incidunt facilis sequi! Veniam\r\n        cupiditate optio magnam officiis cumque beatae laudantium, quas natus at\r\n        aliquid nostrum, voluptatem aliquam quia doloremque, fugit fuga facere\r\n        esse. Nostrum numquam nam, praesentium iusto accusamus quasi delectus\r\n        rem vero laborum, optio blanditiis commodi id quidem beatae in.\r\n        Laudantium fugit aspernatur impedit quam maiores officiis! Odit, est\r\n        quae obcaecati repudiandae modi aliquid corporis natus dolores harum\r\n        porro perferendis magni nam. Aperiam provident accusamus soluta optio\r\n        eaque incidunt, quos modi nulla eligendi quo unde ipsa. Maxime\r\n        distinctio minus beatae consequuntur assumenda ab vitae pariatur.\r\n        Commodi maiores eius esse totam accusantium molestiae accusamus quas\r\n        fugiat placeat quaerat voluptate corrupti architecto sapiente reiciendis\r\n        obcaecati molestias, at tempore quisquam! Quam ratione aliquid quo illo\r\n        delectus eaque quae reiciendis dicta corporis obcaecati, nesciunt\r\n        veritatis molestiae impedit ut mollitia nam quisquam in aut quia nemo.\r\n        Ducimus nulla assumenda numquam debitis recusandae dicta quam amet\r\n        dolores, reprehenderit reiciendis ipsum sapiente sit alias obcaecati\r\n        praesentium consequatur ipsa natus iste distinctio officia vel fugiat\r\n        dolore delectus. Molestiae vero omnis blanditiis perspiciatis quibusdam,\r\n        ipsam quo fugiat sunt pariatur minima aperiam ratione, unde distinctio\r\n        porro incidunt praesentium repellendus aliquam autem dolores natus. Ab\r\n        corporis earum veniam corrupti neque aperiam! Perferendis, eligendi,\r\n        praesentium totam quia excepturi exercitationem dolores debitis cumque\r\n        optio consectetur et suscipit cupiditate fuga nam commodi minima\r\n        molestiae odit consequatur id enim aut quisquam eum. Modi dolores fuga\r\n        neque praesentium repellendus, aspernatur ea quod? Corporis quaerat,\r\n        nobis culpa quod nesciunt eum distinctio itaque cumque molestias\r\n        impedit, deleniti delectus. Eum repellat architecto velit delectus eius\r\n        praesentium, temporibus a nobis ad unde quaerat minus illum eos culpa\r\n        earum possimus? Doloribus nostrum, impedit aut, officia amet at fuga\r\n        velit minima tempora, harum molestiae non nisi quia maxime? Odio quo\r\n        reiciendis nostrum repudiandae, alias delectus aut ullam quisquam. Eius?\r\n      </p>\r\n    </div>\r\n  );\r\n}\r\n","import { useRef, useEffect } from 'react';\r\n\r\nexport const Wavescape = ({ wavescapeMatrix }) => {\r\n  const canvasRef = useRef(null);\r\n  let width = 400;\r\n  let height = 400;\r\n\r\n  useEffect(() => {\r\n    const canvas = canvasRef.current;\r\n    const ctx = canvas.getContext('2d');\r\n\r\n    // increase the actual size of our canvas\r\n    canvas.width = width * devicePixelRatio;\r\n    canvas.height = height * devicePixelRatio;\r\n\r\n    // ensure all drawing operations are scaled\r\n    ctx.scale(devicePixelRatio, devicePixelRatio);\r\n\r\n    // scale everything down using CSS\r\n    canvas.style.width = width + 'px';\r\n    canvas.style.height = height + 'px';\r\n\r\n    let margins = [0, 0];\r\n    let innerSize = [canvas.width - margins[0], canvas.height - margins[1]];\r\n    let baseSubdivision;\r\n\r\n    if (wavescapeMatrix) {\r\n      baseSubdivision = wavescapeMatrix[0].length;\r\n      ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n      ctx.setTransform(1, 0, 0, -1, 0, ctx.canvas.height);\r\n      let ticks = computeTicks(\r\n        innerSize[0],\r\n        innerSize[1],\r\n        baseSubdivision,\r\n        margins[0],\r\n        margins[1]\r\n      );\r\n\r\n      drawWavescape(ticks, ctx, wavescapeMatrix);\r\n    }\r\n  }, [wavescapeMatrix, width, height]);\r\n\r\n  return <canvas width={width} height={height} ref={canvasRef}></canvas>;\r\n};\r\n\r\nfunction computeTicks(\r\n  innerWidth,\r\n  innerHeight,\r\n  baseSubdivision,\r\n  marginLeft,\r\n  marginTop\r\n) {\r\n  //Actually, it is a square matrix\r\n  let unit = innerWidth / baseSubdivision;\r\n  let mat = [];\r\n\r\n  for (let i = 0; i < baseSubdivision + 1; i++) {\r\n    let temp = [];\r\n    for (let j = 0; j < baseSubdivision + 1; j++) {\r\n      if (i <= j)\r\n        temp.push({\r\n          x: (j - i) * unit + (i * unit) / 2 + marginLeft,\r\n          y: i * unit + marginTop,\r\n        });\r\n    }\r\n    mat.push(temp);\r\n  }\r\n\r\n  return mat;\r\n}\r\n\r\nfunction drawWavescape(ticks, ctx, wavescapeMatrix) {\r\n  for (let i = 0; i < ticks.length - 1; i++) {\r\n    for (let j = 0; j < ticks[i].length - 1; j++) {\r\n      if (i === 0) {\r\n        //first row composed by triangles\r\n        ctx.beginPath();\r\n        ctx.moveTo(ticks[i][j].x, ticks[i][j].y);\r\n        ctx.lineTo(ticks[i][j + 1].x, ticks[i][j + 1].y);\r\n        ctx.lineTo(ticks[i + 1][j].x, ticks[i + 1][j].y);\r\n        ctx.fillStyle = wavescapeMatrix[i][j];\r\n        ctx.fill();\r\n      } else {\r\n        //other rows composed by diamonds\r\n        ctx.beginPath();\r\n        ctx.moveTo(ticks[i][j].x, ticks[i][j].y);\r\n        ctx.lineTo(ticks[i - 1][j + 1].x, ticks[i - 1][j + 1].y);\r\n        ctx.lineTo(ticks[i][j + 1].x, ticks[i][j + 1].y);\r\n        ctx.lineTo(ticks[i + 1][j].x, ticks[i + 1][j].y);\r\n        ctx.fillStyle = wavescapeMatrix[i][j];\r\n        ctx.fill();\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { useState, useEffect } from 'react';\r\n\r\nimport { Wavescape } from './Wavescape';\r\n\r\nimport Box from '@mui/material/Box';\r\nimport Switch from '@mui/material/Switch';\r\nimport { Typography } from '@mui/material';\r\nimport Collapse from '@mui/material/Collapse';\r\n\r\nfunction WavescapeModule({ wavescapesData }) {\r\n  const [showModule, setShowModule] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (wavescapesData.length > 0) setShowModule(true);\r\n  }, [wavescapesData]);\r\n\r\n  return (\r\n    <Box>\r\n      <Switch\r\n        onChange={() => setShowModule(!showModule)}\r\n        checked={showModule}\r\n      />\r\n\r\n      <Typography variant='h6'>Static Analysis</Typography>\r\n      <Collapse in={showModule}>\r\n        {wavescapesData.map((data, i) => (\r\n          <Wavescape key={`w.${i}`} wavescapeMatrix={data} />\r\n        ))}\r\n      </Collapse>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default WavescapeModule;\r\n","import { useRef, useState } from 'react';\r\n\r\nimport Radio from '@mui/material/Radio';\r\nimport RadioGroup from '@mui/material/RadioGroup';\r\nimport FormControl from '@mui/material/FormControl';\r\nimport FormLabel from '@mui/material/FormLabel';\r\nimport FormControlLabel from '@mui/material/FormControlLabel';\r\nimport TextField from '@mui/material/TextField';\r\n\r\nfunction ResolutionSelector({ resolutionMode, setResolutionMode }) {\r\n  //State: input error\r\n  const [isInputSecondsInvalid, setIsInputSecondsInvalid] = useState(false);\r\n  const resolutionTextRef = useRef(null);\r\n\r\n  function onChangeResolutionSelection(event) {\r\n    let newResolutionMode = { ...resolutionMode };\r\n    newResolutionMode.seconds = parseFloat(resolutionTextRef.current.value);\r\n\r\n    switch (event.target.value) {\r\n      case 'sixteenth':\r\n        newResolutionMode.noteResolutionValue = 0.25;\r\n        newResolutionMode.useSeconds = false;\r\n        break;\r\n      case 'eighth':\r\n        newResolutionMode.noteResolutionValue = 0.5;\r\n        newResolutionMode.useSeconds = false;\r\n        break;\r\n      case 'quarter':\r\n        newResolutionMode.noteResolutionValue = 1;\r\n        newResolutionMode.useSeconds = false;\r\n        break;\r\n      case 'half':\r\n        newResolutionMode.noteResolutionValue = 2;\r\n        newResolutionMode.useSeconds = false;\r\n        break;\r\n      case 'whole':\r\n        newResolutionMode.noteResolutionValue = 4;\r\n        newResolutionMode.useSeconds = false;\r\n        break;\r\n      case 'seconds':\r\n        newResolutionMode.useSeconds = true;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    setResolutionMode(newResolutionMode);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <FormControl component='fieldset'>\r\n        <FormLabel component='legend'>Resolution</FormLabel>\r\n        <RadioGroup\r\n          row\r\n          defaultValue='quarter'\r\n          onChange={onChangeResolutionSelection}\r\n          aria-label='resolution'\r\n          name='row-radio-buttons-group'\r\n        >\r\n          <FormControlLabel\r\n            value='sixteenth'\r\n            control={<Radio />}\r\n            label=' &#119137;'\r\n          />\r\n          <FormControlLabel\r\n            value='eighth'\r\n            control={<Radio />}\r\n            label=' &#119136;'\r\n          />\r\n          <FormControlLabel\r\n            value='quarter'\r\n            control={<Radio />}\r\n            label='&#9833;'\r\n          />\r\n          <FormControlLabel\r\n            value='half'\r\n            control={<Radio />}\r\n            label='&#119134;'\r\n          />\r\n          <FormControlLabel\r\n            value='whole'\r\n            control={<Radio />}\r\n            label='&#119133;'\r\n          />\r\n          <FormControlLabel\r\n            value='seconds'\r\n            control={<Radio />}\r\n            label={\r\n              <TextField\r\n                error={isInputSecondsInvalid}\r\n                helperText={isInputSecondsInvalid && 'Invalid input'}\r\n                label='in seconds'\r\n                id='standard-size-small'\r\n                defaultValue='1.5'\r\n                size='small'\r\n                variant='standard'\r\n                onChange={() => {\r\n                  let newResolutionMode = { ...resolutionMode };\r\n                  newResolutionMode.seconds = parseFloat(\r\n                    resolutionTextRef.current.value\r\n                  );\r\n                  if (isNaN(newResolutionMode.seconds))\r\n                    setIsInputSecondsInvalid(true);\r\n                  else {\r\n                    setResolutionMode(newResolutionMode);\r\n                    setIsInputSecondsInvalid(false);\r\n                  }\r\n                }}\r\n                inputRef={resolutionTextRef}\r\n              />\r\n            }\r\n          />\r\n        </RadioGroup>\r\n      </FormControl>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ResolutionSelector;\r\n","import * as d3 from 'd3';\r\nimport * as math from 'mathjs';\r\n\r\n//Convert rgb values from [0,1] to [0,255]\r\nconst contToDiscRGB = d3\r\n  .scaleQuantize()\r\n  .domain([0, 1])\r\n  .range(d3.range(0, 255, 1));\r\n\r\n//Generate the color space using the color mapping suggested in the paper\r\nexport const gradient = (angle) => {\r\n  let r, g, b;\r\n\r\n  if (angle >= 0 && angle < math.pi / 3) {\r\n    r = 1;\r\n    g = (3 * angle) / math.pi;\r\n    b = 0;\r\n  } else if (angle >= math.pi / 3 && angle < (math.pi * 2) / 3) {\r\n    r = 2 - (3 * angle) / math.pi;\r\n    g = 1;\r\n    b = 0;\r\n  } else if (angle >= (math.pi * 2) / 3 && angle < math.pi) {\r\n    r = 0;\r\n    g = 1;\r\n    b = (3 * angle) / math.pi - 2;\r\n  } else if (angle >= math.pi && angle < (math.pi * 4) / 3) {\r\n    r = 0;\r\n    g = 4 - (3 * angle) / math.pi;\r\n    b = 1;\r\n  } else if (angle >= (math.pi * 4) / 3 && angle < (math.pi * 5) / 3) {\r\n    r = (3 * angle) / math.pi - 4;\r\n    g = 0;\r\n    b = 1;\r\n  } else if (angle >= (math.pi * 5) / 3 && angle < 2 * math.pi) {\r\n    r = 1;\r\n    g = 0;\r\n    b = 6 - (3 * angle) / math.pi;\r\n  }\r\n\r\n  r = contToDiscRGB(r);\r\n  g = contToDiscRGB(g);\r\n  b = contToDiscRGB(b);\r\n\r\n  return `rgb(${r}, ${g}, ${b})`;\r\n};\r\n\r\n//Generate the color space using the color mapping suggested in the paper\r\nexport const pixelColor = (x, y, distance) => {\r\n  let r, g, b, a;\r\n  //atan2 out in [-pi, pi]\r\n  let angle = Math.atan2(y, x);\r\n  angle = -angle;\r\n  //we need it in [0, 2pi]\r\n  if (angle < 0) angle += 2 * Math.PI;\r\n\r\n  if (angle >= 0 && angle < math.pi / 3) {\r\n    r = 1;\r\n    g = (3 * angle) / math.pi;\r\n    b = 0;\r\n  } else if (angle >= math.pi / 3 && angle < (math.pi * 2) / 3) {\r\n    r = 2 - (3 * angle) / math.pi;\r\n    g = 1;\r\n    b = 0;\r\n  } else if (angle >= (math.pi * 2) / 3 && angle < math.pi) {\r\n    r = 0;\r\n    g = 1;\r\n    b = (3 * angle) / math.pi - 2;\r\n  } else if (angle >= math.pi && angle < (math.pi * 4) / 3) {\r\n    r = 0;\r\n    g = 4 - (3 * angle) / math.pi;\r\n    b = 1;\r\n  } else if (angle >= (math.pi * 4) / 3 && angle < (math.pi * 5) / 3) {\r\n    r = (3 * angle) / math.pi - 4;\r\n    g = 0;\r\n    b = 1;\r\n  } else if (angle >= (math.pi * 5) / 3 && angle < 2 * math.pi) {\r\n    r = 1;\r\n    g = 0;\r\n    b = 6 - (3 * angle) / math.pi;\r\n  }\r\n\r\n  r = contToDiscRGB(r);\r\n  g = contToDiscRGB(g);\r\n  b = contToDiscRGB(b);\r\n  a = contToDiscRGB(distance);\r\n\r\n  return { r, g, b, a };\r\n};\r\n\r\nexport function getRgbaFromComplex(complex) {\r\n  let polarComplex = complex.toPolar();\r\n  let angle = polarComplex.phi; // phi from [-pi, pi], but color mapping defined in [0,2pi]\r\n  let mod = polarComplex.r;\r\n\r\n  //negative angle mapped to their positive representation\r\n  if (angle < 0) angle += 2 * math.pi;\r\n\r\n  let ris = gradient(angle).slice(3, -1);\r\n\r\n  return `rgba${ris}, ${mod})`;\r\n}\r\n","import * as d3 from 'd3';\r\nimport { useRef, useEffect } from 'react';\r\nimport { pixelColor } from './colorMapping';\r\n\r\n//Minus before every y coordinate due to the fact that svg has positive y\r\n//downward, meanwhile cartesian plane has positive y upward\r\n\r\nfunction Circle({\r\n  protoDataCoeff,\r\n  traceDataCoeff,\r\n  userPcvsCoeff,\r\n  currentSubdiv,\r\n  performanceCoeff,\r\n}) {\r\n  const canvasRef = useRef(null);\r\n  const width = 440;\r\n  const height = width;\r\n\r\n  const margin = 40;\r\n  const innerWidth = width - margin;\r\n  const circleRadius = width / 2 - margin;\r\n\r\n  let marksRadiusRatio = 0.01;\r\n\r\n  useEffect(() => {\r\n    const canvas = canvasRef.current;\r\n    const ctx = canvas.getContext('2d');\r\n    let radius = Math.floor(circleRadius * devicePixelRatio);\r\n    let image = ctx.createImageData(2 * radius, 2 * radius);\r\n    let data = image.data;\r\n\r\n    // increase the actual size of our canvas\r\n    canvas.width = width * devicePixelRatio;\r\n    canvas.height = height * devicePixelRatio;\r\n\r\n    // ensure all drawing operations are scaled\r\n    ctx.scale(devicePixelRatio, devicePixelRatio);\r\n\r\n    // scale everything down using CSS\r\n    canvas.style.width = width + 'px';\r\n    canvas.style.height = height + 'px';\r\n\r\n    for (let x = -radius; x < radius; x++) {\r\n      for (let y = -radius; y < radius; y++) {\r\n        let distance = Math.sqrt(x * x + y * y);\r\n\r\n        if (distance > radius) {\r\n          // skip all (x,y) coordinates that are outside of the circle\r\n          continue;\r\n        }\r\n        // Figure out the starting index of this pixel in the image data array.\r\n        let rowLength = 2 * radius;\r\n        let adjustedX = x + radius; // convert x from [-50, 50] to [0, 100] (the coordinates of the image data array)\r\n        let adjustedY = y + radius; // convert y from [-50, 50] to [0, 100] (the coordinates of the image data array)\r\n        let pixelWidth = 4; // each pixel requires 4 slots in the data array\r\n        let index = (adjustedX + adjustedY * rowLength) * pixelWidth;\r\n        let rgba = pixelColor(x, y, distance / radius);\r\n        data[index] = rgba.r;\r\n        data[index + 1] = rgba.g;\r\n        data[index + 2] = rgba.b;\r\n        data[index + 3] = rgba.a;\r\n      }\r\n    }\r\n    ctx.putImageData(image, 0, 0);\r\n  }, [width, height, circleRadius]);\r\n\r\n  useEffect(() => {\r\n    //Workaround for chrome bug on canvas overlay in foreignObj SVG\r\n    canvasRef.current.getContext('2d').getImageData(0, 0, 1, 1);\r\n  }, []);\r\n\r\n  const circleMark = (pcvData, radiusScaleWidth, color, id, opacity = 1) => {\r\n    const mark = d3\r\n      .arc()\r\n      .innerRadius(0)\r\n      .outerRadius((radiusScaleWidth * width) / 2)\r\n      .startAngle(0)\r\n      .endAngle(2 * Math.PI);\r\n\r\n    return (\r\n      <path\r\n        transform={`translate(${pcvData.x * circleRadius},${\r\n          -pcvData.y * circleRadius\r\n        })`}\r\n        fill={color}\r\n        fillOpacity={opacity}\r\n        key={id}\r\n        d={mark()}\r\n      ></path>\r\n    );\r\n  };\r\n\r\n  const protoCircleMark = (pcvData, id) => {\r\n    let scaleRatio = 0.02;\r\n    const mark = d3\r\n      .arc()\r\n      .innerRadius((scaleRatio * width) / 2)\r\n      .outerRadius(((scaleRatio + 0.01) * width) / 2)\r\n      .startAngle(0)\r\n      .endAngle(2 * Math.PI);\r\n\r\n    //Check for sub/superscript\r\n    let labelName = '';\r\n    let subSup = '';\r\n    let isSub = false;\r\n    if (pcvData.label.includes('_') || pcvData.label.includes('^')) {\r\n      for (let i = 0; i < pcvData.label.length; i++) {\r\n        if (pcvData.label[i] === '_') {\r\n          labelName = pcvData.label.slice(0, i);\r\n          subSup = pcvData.label.slice(i + 1, pcvData.label.length);\r\n          isSub = true;\r\n        }\r\n        if (pcvData.label[i] === '^') {\r\n          labelName = pcvData.label.slice(0, i);\r\n          subSup = pcvData.label.slice(i + 1, pcvData.label.length);\r\n        }\r\n      }\r\n    } else {\r\n      labelName = pcvData.label;\r\n    }\r\n\r\n    //Computation of label offset\r\n    let dxOffset = 0,\r\n      dyOffset = 5;\r\n\r\n    if (Math.sign(pcvData.x) === 1) dxOffset = 20;\r\n    else if (Math.sign(pcvData.x) === -1) dxOffset = -20;\r\n\r\n    if (Math.sign(-pcvData.y) === 1) dyOffset = 25;\r\n    else if (Math.sign(-pcvData.y) === -1) dyOffset = -8;\r\n\r\n    if (pcvData.x === 0 && pcvData.y === 0) {\r\n      dxOffset = 15;\r\n      dyOffset = 5;\r\n    }\r\n\r\n    return (\r\n      <g\r\n        transform={`translate(${pcvData.x * circleRadius},${\r\n          -pcvData.y * circleRadius\r\n        })`}\r\n        key={`p.${id}`}\r\n      >\r\n        <path fill={'grey'} key={id} d={mark()}></path>\r\n        <text textAnchor='middle' dx={dxOffset} dy={dyOffset} fontSize='20px'>\r\n          {labelName}\r\n          {isSub ? (\r\n            <tspan fontSize={15} baselineShift='sub'>\r\n              {subSup}\r\n            </tspan>\r\n          ) : (\r\n            <tspan fontSize={15} baselineShift='super'>\r\n              {subSup}\r\n            </tspan>\r\n          )}\r\n        </text>\r\n      </g>\r\n    );\r\n  };\r\n\r\n  const drawBorder = () => {\r\n    return (\r\n      <path\r\n        fill={'azure'}\r\n        d={d3\r\n          .arc()\r\n          .innerRadius(circleRadius - 1)\r\n          .outerRadius(circleRadius + 1)\r\n          .startAngle(0)\r\n          .endAngle(2 * Math.PI)()}\r\n      ></path>\r\n    );\r\n  };\r\n\r\n  const highlightSubdiv = (radiusScaleWidth) => {\r\n    const mark = d3\r\n      .arc()\r\n      .innerRadius(0)\r\n      .outerRadius((radiusScaleWidth * width) / 2)\r\n      .startAngle(0)\r\n      .endAngle(2 * Math.PI);\r\n\r\n    const highlight = d3\r\n      .arc()\r\n      .innerRadius((radiusScaleWidth * width) / 2)\r\n      .outerRadius(((radiusScaleWidth + 0.005) * width) / 2)\r\n      .startAngle(0)\r\n      .endAngle(2 * Math.PI);\r\n\r\n    let highlightedTrace = [];\r\n    let length = 10;\r\n    let opacityArray = [];\r\n\r\n    opacityArray.push(1);\r\n    for (let i = 1; i < length; i++) {\r\n      opacityArray.push(opacityArray[i - 1] * 0.8);\r\n    }\r\n\r\n    if (currentSubdiv < length)\r\n      highlightedTrace = traceDataCoeff.slice(0, currentSubdiv + 1);\r\n    else\r\n      highlightedTrace = traceDataCoeff.slice(\r\n        currentSubdiv - length,\r\n        currentSubdiv\r\n      );\r\n\r\n    highlightedTrace = highlightedTrace.reverse();\r\n\r\n    return highlightedTrace.map((coeff, i) => {\r\n      return (\r\n        <g key={`g.${i}`}>\r\n          <path\r\n            transform={`translate(${coeff.x * circleRadius},${\r\n              -coeff.y * circleRadius\r\n            })`}\r\n            fill={'white'}\r\n            key={i}\r\n            fillOpacity={opacityArray[i]}\r\n            d={mark()}\r\n          ></path>\r\n          <path\r\n            transform={`translate(${coeff.x * circleRadius},${\r\n              -coeff.y * circleRadius\r\n            })`}\r\n            fill={'black'}\r\n            fillOpacity={opacityArray[i]}\r\n            key={`t.${i}`}\r\n            d={highlight()}\r\n          ></path>\r\n        </g>\r\n      );\r\n    });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <svg width={width} height={height}>\r\n        <foreignObject x={margin} y={margin} width={width} height={height}>\r\n          <canvas\r\n            style={{ zIndex: '-1' }}\r\n            width={width}\r\n            height={height}\r\n            ref={canvasRef}\r\n          />\r\n        </foreignObject>\r\n        <g transform={`translate(${width / 2},${width / 2})`}>\r\n          {drawBorder()}\r\n          {protoDataCoeff\r\n            ? protoDataCoeff.map((pcv, i) => protoCircleMark(pcv, i))\r\n            : null}\r\n          {/* {traceDataCoeff\r\n            ? traceDataCoeff.map((pcv, i) =>\r\n                circleMark(pcv, marksRadiusRatio, 'black', i, 0.1)\r\n              )\r\n            : null} */}\r\n          {traceDataCoeff ? highlightSubdiv(marksRadiusRatio) : null}\r\n          {userPcvsCoeff\r\n            ? userPcvsCoeff.map((pcv, i) => {\r\n                if (!pcv.isDisabled)\r\n                  return circleMark(\r\n                    pcv,\r\n                    marksRadiusRatio + 0.015,\r\n                    pcv.color,\r\n                    i\r\n                  );\r\n              })\r\n            : null}\r\n          {circleMark(performanceCoeff, marksRadiusRatio * 2, 'teal')}\r\n        </g>\r\n      </svg>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Circle;\r\n","export const prototypesData = [\r\n  [\r\n    { label: '', x: 0, y: 0 },\r\n    { label: 'C', x: 1, y: 0 },\r\n    { label: 'C', x: 0.866, y: -0.5 },\r\n    { label: 'D', x: 0.5, y: -0.866 },\r\n    { label: 'E', x: 0, y: -1 },\r\n    { label: 'E', x: -0.5, y: -0.866 },\r\n    { label: 'F', x: -0.866, y: -0.5 },\r\n    { label: 'F', x: -1, y: 0 },\r\n    { label: 'G', x: -0.866, y: 0.5 },\r\n    { label: 'A', x: -0.5, y: 0.866 },\r\n    { label: 'A', x: 0, y: 1 },\r\n    { label: 'B', x: 0.5, y: 0.866 },\r\n    { label: 'B', x: 0.866, y: 0.5 },\r\n  ],\r\n  [\r\n    { label: '', x: 0, y: 0 },\r\n    { label: 'T_0', x: 1, y: 0 },\r\n    { label: 'T_1', x: 0.5, y: -0.866 },\r\n    { label: 'T_2', x: -0.5, y: -0.866 },\r\n    { label: 'T_3', x: -1, y: 0 },\r\n    { label: 'T_4', x: -0.5, y: 0.866 },\r\n    { label: 'T_5', x: 0.5, y: 0.866 },\r\n  ],\r\n  [\r\n    { label: '', x: 0, y: 0 },\r\n    { label: 'C+', x: 1, y: 0 },\r\n    { label: 'C+', x: 0, y: -1 },\r\n    { label: 'D+', x: -1, y: 0 },\r\n    { label: 'D+', x: 0, y: 1 },\r\n    { label: 'H_0,3', x: 0.5, y: 0.5 },\r\n    { label: 'H_0,1', x: 0.5, y: -0.5 },\r\n    { label: 'H_1,2', x: -0.5, y: -0.5 },\r\n    { label: 'H_2,3', x: -0.5, y: 0.5 },\r\n  ],\r\n  [\r\n    { label: '', x: 0, y: 0 },\r\n    { label: 'C^o7', x: 1, y: 0 },\r\n    { label: 'C^o7', x: -0.5, y: -0.866 },\r\n    { label: 'D^o7', x: -0.5, y: 0.866 },\r\n    { label: 'O_0,2', x: 0.25, y: 0.433 },\r\n    { label: 'O_0,1', x: 0.25, y: -0.433 },\r\n    { label: 'O_1,2', x: -0.5, y: 0 },\r\n  ],\r\n  [\r\n    { label: '', x: 0, y: 0 },\r\n    { label: 'C', x: 1, y: 0 },\r\n    { label: 'F', x: 0.866, y: -0.5 },\r\n    { label: 'B', x: 0.5, y: -0.866 },\r\n    { label: 'E', x: 0, y: -1 },\r\n    { label: 'A', x: -0.5, y: -0.866 },\r\n    { label: 'C', x: -0.866, y: -0.5 },\r\n    { label: 'F', x: -1, y: 0 },\r\n    { label: 'B', x: -0.866, y: 0.5 },\r\n    { label: 'E', x: -0.5, y: 0.866 },\r\n    { label: 'A', x: 0, y: 1 },\r\n    { label: 'D', x: 0.5, y: 0.866 },\r\n    { label: 'G', x: 0.866, y: 0.5 },\r\n    { label: '', x: 0.267, y: 0.462 },\r\n    { label: '5', x: 0, y: -0.533 },\r\n    { label: '2', x: -0.267, y: 0.462 },\r\n    { label: '3', x: 0.462, y: -0.267 },\r\n    { label: '4', x: -0.533, y: 0 },\r\n    { label: '', x: 0.462, y: 0.267 },\r\n    { label: '6', x: -0.267, y: -0.462 },\r\n    { label: '', x: 0, y: 0.533 },\r\n    { label: '4', x: 0.267, y: -0.462 },\r\n    { label: '3', x: -0.462, y: 0.267 },\r\n    { label: '2', x: 0.533, y: 0 },\r\n    { label: '5', x: -0.462, y: -0.267 },\r\n  ],\r\n  [\r\n    { label: '', x: 0, y: 0 },\r\n    { label: 'WT_1', x: 1, y: 0 },\r\n    { label: 'WT_2', x: -1, y: 0 },\r\n  ],\r\n];\r\n","import Circle from './Circle';\r\nimport { useEffect, useState } from 'react';\r\nimport { prototypesData } from './prototypesData';\r\n\r\nfunction CoefficientsModule({\r\n  coeffTracesData,\r\n  showPrototypes,\r\n  userPcvs,\r\n  currentSubdiv,\r\n  midiDevNotesDftCoeffs,\r\n}) {\r\n  const [selectedProtoPitchClasses, setSelectedProtoPitchClasses] =\r\n    useState(prototypesData);\r\n\r\n  const [subdivUserPcvs, setSubdivUserPcvs] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (showPrototypes) {\r\n      setSelectedProtoPitchClasses(prototypesData);\r\n    } else setSelectedProtoPitchClasses([]);\r\n  }, [showPrototypes]);\r\n\r\n  useEffect(() => {\r\n    //Subdividing the coeffs for each circle\r\n    let tempSubdivUserPcvs = [];\r\n    for (let i = 1; i < 7; i++) {\r\n      let temp = [];\r\n      for (let j = 0; j < userPcvs.length; j++) {\r\n        temp.push({\r\n          x: userPcvs[j].coeffs[i].re,\r\n          y: userPcvs[j].coeffs[i].im,\r\n          color: userPcvs[j].colours[i],\r\n          isDisabled: userPcvs[j].isDisabled,\r\n        });\r\n      }\r\n      tempSubdivUserPcvs.push(temp);\r\n    }\r\n\r\n    setSubdivUserPcvs(tempSubdivUserPcvs);\r\n  }, [userPcvs]);\r\n\r\n  useEffect(() => {\r\n    console.log(userPcvs);\r\n  }, [userPcvs]);\r\n\r\n  return (\r\n    <>\r\n      <Circle\r\n        protoDataCoeff={selectedProtoPitchClasses[0]}\r\n        traceDataCoeff={coeffTracesData[0]}\r\n        userPcvsCoeff={subdivUserPcvs[0]}\r\n        currentSubdiv={currentSubdiv}\r\n        performanceCoeff={midiDevNotesDftCoeffs[1]}\r\n      />\r\n      <Circle\r\n        protoDataCoeff={selectedProtoPitchClasses[1]}\r\n        traceDataCoeff={coeffTracesData[1]}\r\n        userPcvsCoeff={subdivUserPcvs[1]}\r\n        currentSubdiv={currentSubdiv}\r\n        performanceCoeff={midiDevNotesDftCoeffs[2]}\r\n      />\r\n      <Circle\r\n        protoDataCoeff={selectedProtoPitchClasses[2]}\r\n        traceDataCoeff={coeffTracesData[2]}\r\n        userPcvsCoeff={subdivUserPcvs[2]}\r\n        currentSubdiv={currentSubdiv}\r\n        performanceCoeff={midiDevNotesDftCoeffs[3]}\r\n      />\r\n      <Circle\r\n        protoDataCoeff={selectedProtoPitchClasses[3]}\r\n        traceDataCoeff={coeffTracesData[3]}\r\n        userPcvsCoeff={subdivUserPcvs[3]}\r\n        currentSubdiv={currentSubdiv}\r\n        performanceCoeff={midiDevNotesDftCoeffs[4]}\r\n      />\r\n      <Circle\r\n        protoDataCoeff={selectedProtoPitchClasses[4]}\r\n        traceDataCoeff={coeffTracesData[4]}\r\n        userPcvsCoeff={subdivUserPcvs[4]}\r\n        currentSubdiv={currentSubdiv}\r\n        performanceCoeff={midiDevNotesDftCoeffs[5]}\r\n      />\r\n      <Circle\r\n        protoDataCoeff={selectedProtoPitchClasses[5]}\r\n        traceDataCoeff={coeffTracesData[5]}\r\n        userPcvsCoeff={subdivUserPcvs[5]}\r\n        currentSubdiv={currentSubdiv}\r\n        performanceCoeff={midiDevNotesDftCoeffs[6]}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default CoefficientsModule;\r\n","import { styled } from '@mui/material/styles';\r\nimport Chip from '@mui/material/Chip';\r\nimport Paper from '@mui/material/Paper';\r\nimport CircleIcon from '@mui/icons-material/Circle';\r\n\r\nconst ListItem = styled('li')(({ theme }) => ({\r\n  margin: theme.spacing(0.5),\r\n}));\r\n\r\nexport default function PcvChipsBox({ userPcvs, setUserPcvs }) {\r\n  const handleDelete = (chipToDelete) => () => {\r\n    setUserPcvs((chips) =>\r\n      chips.filter((chip) => chip.label !== chipToDelete.label)\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Paper\r\n      sx={{\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        flexWrap: 'wrap',\r\n        listStyle: 'none',\r\n        p: 0.5,\r\n        m: 0,\r\n        width: 0.5,\r\n      }}\r\n      component='ul'\r\n    >\r\n      {userPcvs.map((data, i) => {\r\n        return (\r\n          <ListItem key={`${i}`}>\r\n            <Chip\r\n              variant={data.isDisabled ? 'outlined' : 'filled'}\r\n              icon={<CircleIcon style={{ color: data.colours[1] }} />}\r\n              label={data.label}\r\n              onDelete={handleDelete(data)}\r\n              onClick={() => {\r\n                data.isDisabled = !data.isDisabled;\r\n                setUserPcvs([...userPcvs]);\r\n              }}\r\n            />\r\n          </ListItem>\r\n        );\r\n      })}\r\n    </Paper>\r\n  );\r\n}\r\n","import * as Tone from 'tone';\r\n\r\nimport Box from '@mui/material/Box';\r\nimport PlayArrowRoundedIcon from '@mui/icons-material/PlayArrowRounded';\r\nimport PauseRoundedIcon from '@mui/icons-material/PauseRounded';\r\nimport StopRoundedIcon from '@mui/icons-material/StopRounded';\r\nimport IconButton from '@mui/material/IconButton';\r\n\r\nexport function setPlayerMidiData(midiData, resolution, setCurrentSubdiv) {\r\n  //Remove the scheduled previous song\r\n  Tone.Transport.cancel(0);\r\n  setCurrentSubdiv(0);\r\n  Tone.Transport.stop();\r\n\r\n  let partNotes = [];\r\n  midiData.tracks.forEach((track) =>\r\n    track.notes.forEach((note) => {\r\n      partNotes.push(note);\r\n    })\r\n  );\r\n\r\n  partNotes.forEach(\r\n    (note) => (note.subdiv = Math.floor(note.time / resolution))\r\n  );\r\n\r\n  const part = new Tone.Part(\r\n    (time, note) => {\r\n      sampler.triggerAttackRelease(\r\n        note.name,\r\n        note.duration,\r\n        time,\r\n        note.velocity\r\n      );\r\n      setCurrentSubdiv(note.subdiv);\r\n      //console.log(note.subdiv);\r\n    },\r\n    [...partNotes]\r\n  ).start(0);\r\n}\r\n\r\nconst sampler = new Tone.Sampler({\r\n  urls: {\r\n    A0: 'A0.mp3',\r\n    C1: 'C1.mp3',\r\n    'D#1': 'Ds1.mp3',\r\n    'F#1': 'Fs1.mp3',\r\n    A1: 'A1.mp3',\r\n    C2: 'C2.mp3',\r\n    'D#2': 'Ds2.mp3',\r\n    'F#2': 'Fs2.mp3',\r\n    A2: 'A2.mp3',\r\n    C3: 'C3.mp3',\r\n    'D#3': 'Ds3.mp3',\r\n    'F#3': 'Fs3.mp3',\r\n    A3: 'A3.mp3',\r\n    C4: 'C4.mp3',\r\n    'D#4': 'Ds4.mp3',\r\n    'F#4': 'Fs4.mp3',\r\n    A4: 'A4.mp3',\r\n    C5: 'C5.mp3',\r\n    'D#5': 'Ds5.mp3',\r\n    'F#5': 'Fs5.mp3',\r\n    A5: 'A5.mp3',\r\n    C6: 'C6.mp3',\r\n    'D#6': 'Ds6.mp3',\r\n    'F#6': 'Fs6.mp3',\r\n    A6: 'A6.mp3',\r\n    C7: 'C7.mp3',\r\n    'D#7': 'Ds7.mp3',\r\n    'F#7': 'Fs7.mp3',\r\n    A7: 'A7.mp3',\r\n    C8: 'C8.mp3',\r\n  },\r\n  release: 1,\r\n  baseUrl: 'https://tonejs.github.io/audio/salamander/',\r\n}).toDestination();\r\nsampler.volume.value = -20;\r\n\r\nexport default function Player() {\r\n  return (\r\n    <Box>\r\n      <IconButton\r\n        onClick={() => {\r\n          console.log('stop');\r\n          Tone.Transport.stop();\r\n        }}\r\n        size='large'\r\n        children={<StopRoundedIcon fontSize='large' />}\r\n      />\r\n      <IconButton\r\n        onClick={() => {\r\n          console.log('pause');\r\n          Tone.Transport.pause();\r\n        }}\r\n        size='large'\r\n        children={<PauseRoundedIcon fontSize='large' />}\r\n      />\r\n      <IconButton\r\n        onClick={() => {\r\n          console.log('play');\r\n          if (Tone.context.state !== 'running') {\r\n            console.log('state running');\r\n            Tone.context.resume();\r\n          }\r\n          Tone.Transport.start();\r\n        }}\r\n        size='large'\r\n        children={<PlayArrowRoundedIcon fontSize='large' />}\r\n      />\r\n    </Box>\r\n  );\r\n}\r\n","import * as math from 'mathjs';\r\n\r\n// Compute the DFT on the input pcv\r\nexport default function dft(\r\n  pcv,\r\n  normalize = true,\r\n  round = false,\r\n  polar = false\r\n) {\r\n  let N = pcv.length;\r\n\r\n  let coeffs = [];\r\n\r\n  for (let k = 0; k < N / 2 + 1; k++) {\r\n    let temp = 0;\r\n    for (let n = 0; n < N; n++) {\r\n      temp = math.add(\r\n        math.multiply(\r\n          pcv[n],\r\n          math.exp(math.multiply(math.i, (-2 * math.pi * k * n) / N))\r\n        ),\r\n        temp\r\n      );\r\n    }\r\n    coeffs.push(temp);\r\n  }\r\n\r\n  coeffs = coeffs.slice();\r\n\r\n  if (normalize) {\r\n    const norm = coeffs[0];\r\n    //'!=' gives a warning but '!==' doesn't compute correctly the if statement\r\n    if (norm != 0) coeffs = coeffs.map((coeff) => math.divide(coeff, norm));\r\n  }\r\n\r\n  if (round) {\r\n    coeffs.forEach((coeff) => {\r\n      coeff.re = Math.round(coeff.re * 10000) / 10000;\r\n      coeff.im = Math.round(coeff.im * 10000) / 10000;\r\n    });\r\n  }\r\n\r\n  if (polar) {\r\n    coeffs = coeffs.map((coeff) => coeff.toPolar());\r\n  }\r\n\r\n  return coeffs;\r\n}\r\n\r\nexport function sumAndNormalize(coeffs) {\r\n  let sum = coeffs[0];\r\n  for (let i = 1; i < coeffs.length; i++) {\r\n    //incremental sum for each coeff\r\n    let temp = [];\r\n    //coeff per coeff sum\r\n    for (let j = 0; j < coeffs[i].length; j++) {\r\n      temp.push(math.add(sum[j], coeffs[i][j]));\r\n    }\r\n    sum = temp.slice();\r\n  }\r\n\r\n  const norm = sum[0];\r\n  sum = sum.map((coeff) => math.divide(coeff, norm));\r\n\r\n  return sum;\r\n}\r\n","import { Midi } from '@tonejs/midi';\r\nimport dft, { sumAndNormalize } from './DFT';\r\nimport { getRgbaFromComplex, pixelColor } from './colorMapping';\r\n\r\nclass Pcv {\r\n  constructor() {\r\n    this.C = 0;\r\n    this.Cs = 0;\r\n    this.D = 0;\r\n    this.Ds = 0;\r\n    this.E = 0;\r\n    this.F = 0;\r\n    this.Fs = 0;\r\n    this.G = 0;\r\n    this.Gs = 0;\r\n    this.A = 0;\r\n    this.As = 0;\r\n    this.B = 0;\r\n  }\r\n\r\n  addNoteDuration(targetPitch, duration) {\r\n    switch (targetPitch) {\r\n      case 'C':\r\n        this.C += duration;\r\n        break;\r\n      case 'C#':\r\n        this.Cs += duration;\r\n        break;\r\n      case 'D':\r\n        this.D += duration;\r\n        break;\r\n      case 'D#':\r\n        this.Ds += duration;\r\n        break;\r\n      case 'E':\r\n        this.E += duration;\r\n        break;\r\n      case 'F':\r\n        this.F += duration;\r\n        break;\r\n      case 'F#':\r\n        this.Fs += duration;\r\n        break;\r\n      case 'G':\r\n        this.G += duration;\r\n        break;\r\n      case 'G#':\r\n        this.Gs += duration;\r\n        break;\r\n      case 'A':\r\n        this.A += duration;\r\n        break;\r\n      case 'A#':\r\n        this.As += duration;\r\n        break;\r\n      case 'B':\r\n        this.B += duration;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  getPcvAsArray() {\r\n    let temp = [\r\n      this.C,\r\n      this.Cs,\r\n      this.D,\r\n      this.Ds,\r\n      this.E,\r\n      this.F,\r\n      this.Fs,\r\n      this.G,\r\n      this.Gs,\r\n      this.A,\r\n      this.As,\r\n      this.B,\r\n    ];\r\n\r\n    return temp;\r\n  }\r\n\r\n  add(pcv) {\r\n    this.C = pcv.C;\r\n    this.Cs = pcv.Cs;\r\n    this.D = pcv.D;\r\n    this.Ds = pcv.Ds;\r\n    this.E = pcv.E;\r\n    this.F = pcv.F;\r\n    this.Fs = pcv.Fs;\r\n    this.G = pcv.G;\r\n    this.Gs = pcv.Gs;\r\n    this.A = pcv.A;\r\n    this.As = pcv.As;\r\n    this.B = pcv.B;\r\n  }\r\n}\r\n\r\nexport function getMidiFileDataObject(binMidiFile) {\r\n  let midiData = new Midi(binMidiFile);\r\n\r\n  let tempos = midiData.header.tempos.map((tempo) => Math.round(tempo.bpm));\r\n  let midiBpm = Math.max(...tempos); //For quarter-note conversion\r\n\r\n  //Check and delete percussive tracks!\r\n  let nonPercussiveTracks = midiData.tracks.filter(\r\n    (track) => track.instrument.percussion === false\r\n  );\r\n\r\n  midiData.tracks = nonPercussiveTracks;\r\n\r\n  return { midiData, midiBpm };\r\n}\r\n\r\nexport function getDftCoeffStatic(midiFile, resolution) {\r\n  let tracksSubdivision = [];\r\n\r\n  midiFile.tracks.forEach((track) =>\r\n    tracksSubdivision.push(\r\n      getSubdivision(track.notes, resolution, midiFile.duration)\r\n    )\r\n  );\r\n  console.log(tracksSubdivision);\r\n\r\n  //pcv arrary init\r\n  let pcvSubdivision = [];\r\n\r\n  for (let i = 0; i < tracksSubdivision[0].length; i++) {\r\n    pcvSubdivision.push(new Pcv());\r\n  }\r\n\r\n  //populating the array for each subdiv with the durations\r\n  //for each track: i, for each subdiv: j, for each note of the subdiv: k\r\n  for (let i = 0; i < tracksSubdivision.length; i++) {\r\n    for (let j = 0; j < tracksSubdivision[i].length; j++) {\r\n      for (let k = 0; k < tracksSubdivision[i][j].length; k++) {\r\n        let { pitch, duration } = tracksSubdivision[i][j][k];\r\n        pcvSubdivision[j].addNoteDuration(pitch, duration);\r\n      }\r\n    }\r\n  }\r\n\r\n  //Computing the dft coeffs for of each subdiv\r\n  let dftCoeffsSubdivision = pcvSubdivision.map((pcv) =>\r\n    dft(pcv.getPcvAsArray())\r\n  );\r\n\r\n  //Computing the dft coeffs matrix\r\n  let dftCoeffsMatrix = [];\r\n\r\n  //adding the first row\r\n  dftCoeffsMatrix.push(dftCoeffsSubdivision);\r\n\r\n  return dftCoeffsMatrix;\r\n}\r\n\r\nexport function getDftCoeffDynamic(midiData, resolutionMode, currentSongBPM) {\r\n  let { noteResolutionValue, seconds, useSeconds } = resolutionMode;\r\n\r\n  let resolution;\r\n  if (useSeconds) {\r\n    isNaN(seconds) ? (resolution = 1) : (resolution = seconds);\r\n  } else {\r\n    //Use bpm\r\n    resolution = noteResolutionValue * (60 / currentSongBPM);\r\n  }\r\n\r\n  console.log(currentSongBPM);\r\n  console.log(resolution);\r\n\r\n  let duration = midiData.duration;\r\n  let tracksSubdivision = [];\r\n\r\n  //TODO: check and delete percussive tracks!\r\n  let nonPercussiveTracks = midiData.tracks.filter(\r\n    (track) => track.instrument.percussion === false\r\n  );\r\n\r\n  nonPercussiveTracks.forEach((track) => {\r\n    tracksSubdivision.push(getSubdivision(track.notes, resolution, duration));\r\n  });\r\n\r\n  //pcv arrary init\r\n  let pcvSubdivision = [];\r\n\r\n  for (let i = 0; i < tracksSubdivision[0].length; i++) {\r\n    pcvSubdivision.push(new Pcv());\r\n  }\r\n\r\n  //populating the array for each subdiv with the durations\r\n  //for each track: i, for each subdiv: j, for each note of the subdiv: k\r\n  for (let i = 0; i < tracksSubdivision.length; i++) {\r\n    for (let j = 0; j < tracksSubdivision[i].length; j++) {\r\n      for (let k = 0; k < tracksSubdivision[i][j].length; k++) {\r\n        let { pitch, duration } = tracksSubdivision[i][j][k];\r\n        pcvSubdivision[j].addNoteDuration(pitch, duration);\r\n      }\r\n    }\r\n  }\r\n\r\n  //Computing the dft coeffs for of each subdiv\r\n  let dftCoeffsSubdivision = pcvSubdivision.map((pcv) =>\r\n    dft(pcv.getPcvAsArray())\r\n  );\r\n\r\n  //Computing the dft coeffs matrix\r\n  let dftCoeffsMatrix = [];\r\n\r\n  //adding the first row\r\n  dftCoeffsMatrix.push(dftCoeffsSubdivision);\r\n\r\n  //Subdividing the first row of the dft coeff matrix to get the trace for each coeff\r\n  let traces = [];\r\n  let firstRow = dftCoeffsMatrix[0];\r\n  for (let i = 1; i < 7; i++) {\r\n    let temp = [];\r\n    for (let j = 0; j < firstRow.length; j++) {\r\n      temp.push({ x: firstRow[j][i].re, y: firstRow[j][i].im });\r\n    }\r\n    traces.push(temp);\r\n  }\r\n\r\n  return { tracesData: traces, resolution: resolution };\r\n}\r\n\r\n//Resolution is in seconds\r\nexport function getDftCoeffFromMidiLinear(\r\n  midiFile,\r\n  multiRes = 1,\r\n  seconds = 1,\r\n  useSeconds\r\n) {\r\n  //For now, we don't take into account tempo changes\r\n  let midiData = new Midi(midiFile);\r\n  console.log(midiData);\r\n\r\n  let resolution;\r\n  if (useSeconds) {\r\n    isNaN(seconds) ? (resolution = 1) : (resolution = seconds);\r\n  } else {\r\n    //Use bpm\r\n    let tempos = midiData.header.tempos.map((tempo) => Math.round(tempo.bpm));\r\n    let bpm = Math.max(...tempos); //For quarter-note conversion\r\n    resolution = multiRes * (60 / bpm);\r\n  }\r\n\r\n  console.log(resolution);\r\n\r\n  let duration = midiData.duration;\r\n  let tracksSubdivision = [];\r\n\r\n  //TODO: check and delete percussive tracks!\r\n  let nonPercussiveTracks = midiData.tracks.filter(\r\n    (track) => track.instrument.percussion === false\r\n  );\r\n\r\n  nonPercussiveTracks.forEach((track) => {\r\n    tracksSubdivision.push(getSubdivision(track.notes, resolution, duration));\r\n  });\r\n\r\n  //pcv arrary init\r\n  let pcvSubdivision = [];\r\n\r\n  for (let i = 0; i < tracksSubdivision[0].length; i++) {\r\n    pcvSubdivision.push(new Pcv());\r\n  }\r\n\r\n  //populating the array for each subdiv with the durations\r\n  //for each track: i, for each subdiv: j, for each note of the subdiv: k\r\n  for (let i = 0; i < tracksSubdivision.length; i++) {\r\n    for (let j = 0; j < tracksSubdivision[i].length; j++) {\r\n      for (let k = 0; k < tracksSubdivision[i][j].length; k++) {\r\n        let { pitch, duration } = tracksSubdivision[i][j][k];\r\n        pcvSubdivision[j].addNoteDuration(pitch, duration);\r\n      }\r\n    }\r\n  }\r\n\r\n  //Computing the dft coeffs for of each subdiv\r\n  let dftCoeffsSubdivision = pcvSubdivision.map((pcv) =>\r\n    dft(pcv.getPcvAsArray())\r\n  );\r\n\r\n  //Computing the dft coeffs matrix\r\n  let dftCoeffsMatrix = [];\r\n\r\n  //adding the first row\r\n  dftCoeffsMatrix.push(dftCoeffsSubdivision);\r\n\r\n  return { dftCoeffsLinear: dftCoeffsMatrix, resolution: resolution };\r\n}\r\n\r\n//Resolution is in seconds\r\nexport function getDftCoeffFromMidi(midiFile, resolution) {\r\n  //For now, we don't take into account tempo changes\r\n  let midiData = new Midi(midiFile);\r\n  console.log(midiData);\r\n  //const bpm = midiData.header.tempos[0].bpm; //For quarter-note conversion\r\n  let duration = midiData.duration;\r\n  let tracksSubdivision = [];\r\n\r\n  //TODO: check and delete percussive tracks!\r\n  let nonPercussiveTracks = midiData.tracks.filter(\r\n    (track) => track.instrument.percussion === false\r\n  );\r\n\r\n  /* midiData.tracks.forEach((track) => {\r\n    let tempMat = [];\r\n\r\n    for (let wndLen = resolution; wndLen < duration; wndLen += resolution) {\r\n      tempMat.push(getRow(track.notes, wndLen, resolution, duration));\r\n    }\r\n    //Since wndLen < duration, the for cycle do not include the top vertex of the triangle\r\n    tempMat.push(getRow(track.notes, duration, duration, duration)); //manually added\r\n\r\n    trackMatrices.push(tempMat);\r\n  }); */\r\n\r\n  nonPercussiveTracks.forEach((track) => {\r\n    tracksSubdivision.push(getSubdivision(track.notes, resolution, duration));\r\n  });\r\n\r\n  //pcv arrary init\r\n  let pcvSubdivision = [];\r\n\r\n  for (let i = 0; i < tracksSubdivision[0].length; i++) {\r\n    pcvSubdivision.push(new Pcv());\r\n  }\r\n\r\n  //populating the array for each subdiv with the durations\r\n  //for each track: i, for each subdiv: j, for each note of the subdiv: k\r\n  for (let i = 0; i < tracksSubdivision.length; i++) {\r\n    for (let j = 0; j < tracksSubdivision[i].length; j++) {\r\n      for (let k = 0; k < tracksSubdivision[i][j].length; k++) {\r\n        let { pitch, duration } = tracksSubdivision[i][j][k];\r\n        pcvSubdivision[j].addNoteDuration(pitch, duration);\r\n      }\r\n    }\r\n  }\r\n\r\n  //Computing the dft coeffs for of each subdiv\r\n  let dftCoeffsSubdivision = pcvSubdivision.map((pcv) =>\r\n    dft(pcv.getPcvAsArray())\r\n  );\r\n\r\n  //Computing the dft coeffs matrix\r\n  let dftCoeffsMatrix = [];\r\n\r\n  //adding the first row\r\n  dftCoeffsMatrix.push(dftCoeffsSubdivision);\r\n\r\n  return dftCoeffsMatrix;\r\n\r\n  /* OLD   //Computing each row of the matrix as the normalized sum of the previous row (dft as linear op)\r\n  let matrixHeight = dftCoeffsSubdivision.length;\r\n  let rowsWidth = dftCoeffsSubdivision.length;\r\n  for (let i = 1; i < matrixHeight; i++) {\r\n    //starting from second row, first already populated\r\n    let temp = [];\r\n    for (let cursor = 1; cursor < rowsWidth; cursor++) {\r\n      //starting from the second element and backward summing\r\n      temp.push(\r\n        //TODO change, sum subdiv only on first row\r\n        sumAndNormalize(\r\n          dftCoeffsMatrix[i - 1][cursor - 1],\r\n          dftCoeffsMatrix[i - 1][cursor]\r\n        )\r\n      );\r\n    }\r\n    rowsWidth--;\r\n    dftCoeffsMatrix.push(temp);\r\n  } */\r\n}\r\n\r\nexport function getRgbaMatrix(dftCoeffsMatrix) {\r\n  //Computing each row of the matrix as the normalized sum of the previous row (dft as linear op)\r\n  let matrixHeight = dftCoeffsMatrix[0].length;\r\n  let rowsWidth = dftCoeffsMatrix[0].length;\r\n  let wndLenUnits = 2;\r\n  for (let i = 1; i < matrixHeight; i++) {\r\n    //starting from second row, first already populated\r\n    let temp = [];\r\n    for (let cursor = 0; cursor + wndLenUnits <= rowsWidth; cursor++) {\r\n      let windowed = dftCoeffsMatrix[0].slice(cursor, cursor + wndLenUnits);\r\n      temp.push(sumAndNormalize(windowed));\r\n    }\r\n    wndLenUnits++;\r\n    dftCoeffsMatrix.push(temp);\r\n  }\r\n\r\n  /* //Computing the pcvs for each subdivision\r\n  let pcvMatrix = [];\r\n\r\n  for (let i = 0; i < trackMatrices[0].length; i++) {\r\n    let temp = [];\r\n    for (let k = 0; k < trackMatrices[0][i].length; k++) {\r\n      temp.push(new Pcv());\r\n    }\r\n    pcvMatrix.push(temp);\r\n  } */\r\n\r\n  /* trackMatrices.forEach((track) => {\r\n    for (let i = 0; i < track.length; i++) {\r\n      for (let j = 0; j < track[i].length; j++) {\r\n        for (let k = 0; k < track[i][j].length; k++) {\r\n          let { pitch, duration } = track[i][j][k];\r\n          pcvMatrix[i][j].addNoteDuration(pitch, duration);\r\n        }\r\n      }\r\n    }\r\n  }); */\r\n\r\n  /* //Computing the dft coeff matrix\r\n  let dftCoeffMatrix = [];\r\n\r\n  for (let i = 0; i < pcvMatrix.length; i++) {\r\n    let temp = [];\r\n    for (let j = 0; j < pcvMatrix[i].length; j++) {\r\n      temp.push(dft(pcvMatrix[i][j].getPcvAsArray()));\r\n    }\r\n    dftCoeffMatrix.push(temp);\r\n  } */\r\n\r\n  let rgbaMatrices = [];\r\n\r\n  for (let i = 0; i < 6; i++) {\r\n    let matrix = [];\r\n    for (let j = 0; j < dftCoeffsMatrix.length; j++) {\r\n      let subdiv = [];\r\n      for (let k = 0; k < dftCoeffsMatrix[j].length; k++) {\r\n        subdiv.push('');\r\n      }\r\n      matrix.push(subdiv);\r\n    }\r\n    rgbaMatrices.push(matrix);\r\n  }\r\n\r\n  //Creating a single matrix for each coefficient with rgba values for each diamond\r\n  for (let i = 0; i < dftCoeffsMatrix.length; i++) {\r\n    for (let j = 0; j < dftCoeffsMatrix[i].length; j++) {\r\n      for (let k = 1; k < dftCoeffsMatrix[i][j].length; k++) {\r\n        rgbaMatrices[k - 1][i][j] = getRgbaFromComplex(\r\n          dftCoeffsMatrix[i][j][k]\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  return rgbaMatrices;\r\n}\r\n\r\nfunction getSubdivision(notes, resolution, duration) {\r\n  let subdivision = [];\r\n  let wndLen = resolution;\r\n\r\n  for (let cursor = 0; cursor < duration; cursor += resolution) {\r\n    let temp = [];\r\n    notes.forEach((note) => {\r\n      let { time, duration } = note;\r\n\r\n      //Check if note contribute to the current window\r\n      if (isValidNote(time, duration, cursor, wndLen)) {\r\n        let noteAndDuration = { pitch: note.pitch };\r\n        //Computation of note contribution in the current window\r\n        if (time < cursor) {\r\n          if (time + duration < cursor + wndLen)\r\n            noteAndDuration.duration = time + duration - cursor;\r\n          else noteAndDuration.duration = wndLen;\r\n        } else {\r\n          if (time + duration <= cursor + wndLen)\r\n            noteAndDuration.duration = duration;\r\n          else noteAndDuration.duration = cursor + wndLen - time;\r\n        }\r\n\r\n        temp.push(noteAndDuration);\r\n      }\r\n    });\r\n\r\n    subdivision.push(temp);\r\n  }\r\n\r\n  return subdivision;\r\n}\r\n\r\nfunction isValidNote(time, duration, cursor, wndLen) {\r\n  if (\r\n    (time > cursor && time < cursor + wndLen) ||\r\n    (time + duration > cursor && time + duration < cursor + wndLen) ||\r\n    (time <= cursor && time + duration >= cursor + wndLen)\r\n  ) {\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n\r\nexport function getComplementaryColours(coeffs) {\r\n  let colours = [];\r\n\r\n  //Opposite of re and im to get the complementary colour\r\n  coeffs.forEach((coeff) => {\r\n    let rho = Math.sqrt(Math.pow(coeff.re, 2) + Math.pow(coeff.im, 2));\r\n    let rgba = pixelColor(coeff.re, -coeff.im, rho);\r\n\r\n    //RGB complementary\r\n    rgba.r = 255 - rgba.r;\r\n    rgba.g = 255 - rgba.g;\r\n    rgba.b = 255 - rgba.b;\r\n\r\n    colours.push(rgbaToHexa(rgba));\r\n  });\r\n\r\n  return colours;\r\n}\r\n\r\nfunction rgbaToHexa(rgba) {\r\n  let hexa = Object.keys(rgba).map((key) => colorToHex(rgba[key]));\r\n  return `#${hexa.join('')}`;\r\n}\r\n\r\nfunction colorToHex(color) {\r\n  let hexadecimal = color.toString(16);\r\n  return hexadecimal.length == 1 ? '0' + hexadecimal : hexadecimal;\r\n}\r\n","import { useState, useEffect, useRef } from 'react';\r\nimport * as Tone from 'tone';\r\nimport WavescapeModule from '../WavescapeModule';\r\nimport ResolutionSelector from '../ResolutionSelector';\r\nimport CoefficientsModule from '../CoefficientsModule';\r\nimport PcvChipsBox from '../PcvChipsBox';\r\n\r\nimport Player, { setPlayerMidiData } from '../Player';\r\nimport {\r\n  getComplementaryColours,\r\n  getRgbaMatrix,\r\n  getMidiFileDataObject,\r\n  getDftCoeffStatic,\r\n  getDftCoeffDynamic,\r\n} from '../getDftMatrices';\r\nimport dft from '../DFT';\r\nimport parse from '../parser';\r\n\r\nimport Box from '@mui/material/Box';\r\nimport TextField from '@mui/material/TextField';\r\nimport Button from '@mui/material/Button';\r\nimport Container from '@mui/material/Container';\r\nimport FormGroup from '@mui/material/FormGroup';\r\nimport FormControlLabel from '@mui/material/FormControlLabel';\r\nimport Switch from '@mui/material/Switch';\r\nimport Divider from '@mui/material/Divider';\r\n\r\nlet currentSongBPM = 80;\r\nlet currentSongMidiData;\r\n\r\nfunction Application() {\r\n  //State: contains the color data of the wavescape of a given coeff (Array(6) one for coeff)\r\n  const [wavescapesData, setWavescapesData] = useState([]);\r\n\r\n  //State: represents the selected row on the wavescape (by default the first row) for each coeff\r\n  const [coeffTracesData, setCoeffTracesData] = useState([]);\r\n  const [showPrototypes, setShowPrototypes] = useState(true);\r\n  const [currentSubdiv, setCurrentSubdiv] = useState(0);\r\n\r\n  //State: inputs\r\n  const [resolutionMode, setResolutionMode] = useState({\r\n    noteResolutionValue: 1,\r\n    seconds: 1.5,\r\n    useSeconds: false,\r\n  });\r\n\r\n  const [userPcvs, setUserPcvs] = useState([]);\r\n  const pcvTextRef = useRef(null);\r\n\r\n  const [file, setFile] = useState('');\r\n\r\n  //MIDI inputs\r\n  const [midiDevNotesDftCoeffs, setMidiDevNotesDftCoeffs] = useState(\r\n    dft([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]).map((coeff) => {\r\n      return { x: coeff.re, y: coeff.im };\r\n    })\r\n  );\r\n\r\n  //State: error states in input\r\n  const [isInputPcvInvalid, setIsInputPcvInvalid] = useState(false);\r\n\r\n  //MIDI parsing on file change\r\n  useEffect(() => {\r\n    let input = document.getElementById('file').files[0];\r\n\r\n    if (input) {\r\n      let fileReader = new FileReader();\r\n      fileReader.readAsArrayBuffer(input);\r\n      fileReader.onload = (loadedFile) => {\r\n        let { midiData, midiBpm } = getMidiFileDataObject(\r\n          loadedFile.target.result\r\n        );\r\n        currentSongBPM = midiBpm;\r\n        currentSongMidiData = midiData;\r\n\r\n        //Wavescapes static analysis\r\n        let subdivsNumberStatic = 50;\r\n        let staticResolution =\r\n          currentSongMidiData.duration / subdivsNumberStatic;\r\n\r\n        setWavescapesData(\r\n          getRgbaMatrix(\r\n            getDftCoeffStatic(currentSongMidiData, staticResolution)\r\n          )\r\n        );\r\n\r\n        //Circles dynamic analysis\r\n        let { tracesData, resolution } = getDftCoeffDynamic(\r\n          midiData,\r\n          resolutionMode,\r\n          currentSongBPM\r\n        );\r\n        setCoeffTracesData(tracesData);\r\n        setPlayerMidiData(currentSongMidiData, resolution, setCurrentSubdiv);\r\n      };\r\n    }\r\n  }, [file]);\r\n\r\n  function handleSubmitPitchClass(input) {\r\n    //In order not to refresh the page (default behaviuor)\r\n    let parsedInput;\r\n    let userPcvObjects = [];\r\n\r\n    try {\r\n      parsedInput = parse(input);\r\n    } catch (error) {\r\n      console.log(error.message);\r\n      setIsInputPcvInvalid(true);\r\n      return;\r\n    }\r\n\r\n    parsedInput.forEach((input) =>\r\n      userPcvObjects.push({\r\n        label: `(${input})`,\r\n        isDisabled: false,\r\n        coeffs: dft(input, true, true, false),\r\n      })\r\n    );\r\n\r\n    userPcvObjects.forEach((pcvData) => {\r\n      pcvData.colours = getComplementaryColours(pcvData.coeffs);\r\n    });\r\n\r\n    //Check if we are adding an input already inserted\r\n    let labels = userPcvs.map((pcvData) => pcvData.label);\r\n    labels.forEach((label) => {\r\n      userPcvObjects = userPcvObjects.filter(\r\n        (pcvObj) => pcvObj.label !== label\r\n      );\r\n    });\r\n\r\n    setUserPcvs([...userPcvs, ...userPcvObjects]);\r\n  }\r\n\r\n  //MIDI devices init\r\n  useEffect(() => {\r\n    //INIT\r\n    let currentNotes = [];\r\n    const sampler = new Tone.Sampler({\r\n      urls: {\r\n        A0: 'A0.mp3',\r\n        C1: 'C1.mp3',\r\n        'D#1': 'Ds1.mp3',\r\n        'F#1': 'Fs1.mp3',\r\n        A1: 'A1.mp3',\r\n        C2: 'C2.mp3',\r\n        'D#2': 'Ds2.mp3',\r\n        'F#2': 'Fs2.mp3',\r\n        A2: 'A2.mp3',\r\n        C3: 'C3.mp3',\r\n        'D#3': 'Ds3.mp3',\r\n        'F#3': 'Fs3.mp3',\r\n        A3: 'A3.mp3',\r\n        C4: 'C4.mp3',\r\n        'D#4': 'Ds4.mp3',\r\n        'F#4': 'Fs4.mp3',\r\n        A4: 'A4.mp3',\r\n        C5: 'C5.mp3',\r\n        'D#5': 'Ds5.mp3',\r\n        'F#5': 'Fs5.mp3',\r\n        A5: 'A5.mp3',\r\n        C6: 'C6.mp3',\r\n        'D#6': 'Ds6.mp3',\r\n        'F#6': 'Fs6.mp3',\r\n        A6: 'A6.mp3',\r\n        C7: 'C7.mp3',\r\n        'D#7': 'Ds7.mp3',\r\n        'F#7': 'Fs7.mp3',\r\n        A7: 'A7.mp3',\r\n        C8: 'C8.mp3',\r\n      },\r\n      release: 1,\r\n      baseUrl: 'https://tonejs.github.io/audio/salamander/',\r\n    }).toDestination();\r\n    sampler.volume.value = -30;\r\n\r\n    if (navigator.requestMIDIAccess) {\r\n      navigator.requestMIDIAccess().then(success, failure);\r\n    }\r\n\r\n    function computeDftCoeffs(playedNotes) {\r\n      let pcv = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\r\n\r\n      playedNotes.forEach((note) => {\r\n        let pitch;\r\n        if (note.includes('#')) {\r\n          pitch = note.slice(0, 2);\r\n        } else pitch = pitch = note.slice(0, 1);\r\n\r\n        switch (pitch) {\r\n          case 'C':\r\n            pcv[0] += 1;\r\n            break;\r\n          case 'C#':\r\n            pcv[1] += 1;\r\n            break;\r\n          case 'D':\r\n            pcv[2] += 1;\r\n            break;\r\n          case 'D#':\r\n            pcv[3] += 1;\r\n            break;\r\n          case 'E':\r\n            pcv[4] += 1;\r\n            break;\r\n          case 'F':\r\n            pcv[5] += 1;\r\n            break;\r\n          case 'F#':\r\n            pcv[6] += 1;\r\n            break;\r\n          case 'G':\r\n            pcv[7] += 1;\r\n            break;\r\n          case 'G#':\r\n            pcv[8] += 1;\r\n            break;\r\n          case 'A':\r\n            pcv[9] += 1;\r\n            break;\r\n          case 'A#':\r\n            pcv[10] += 1;\r\n            break;\r\n          case 'B':\r\n            pcv[11] += 1;\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n      });\r\n\r\n      let dftCoeffs = dft(pcv);\r\n      dftCoeffs = dftCoeffs.map((coeff) => {\r\n        return { x: coeff.re, y: coeff.im };\r\n      });\r\n      //console.log(dftCoeffs);\r\n      setMidiDevNotesDftCoeffs(dftCoeffs);\r\n    }\r\n\r\n    function handleInput(input) {\r\n      const command = input.data[0];\r\n      const note = Tone.Frequency(input.data[1], 'midi').toNote();\r\n      const velocity = Math.round(input.data[2] * 0.05);\r\n      //const velocity = input.data[2];\r\n\r\n      switch (command) {\r\n        case 144: //noteOn\r\n          if (velocity > 0) {\r\n            //Note is on\r\n            sampler.triggerAttack(note, Tone.immediate(), velocity);\r\n            currentNotes.push(note);\r\n          } else {\r\n            //Note is off\r\n            sampler.triggerRelease(note, Tone.immediate());\r\n            currentNotes.filter((currentNote) => currentNote !== note);\r\n          }\r\n          break;\r\n        case 128: //noteOff\r\n          sampler.triggerRelease(note, Tone.immediate());\r\n          currentNotes = currentNotes.filter(\r\n            (currentNote) => currentNote !== note\r\n          );\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n\r\n      computeDftCoeffs(currentNotes);\r\n    }\r\n\r\n    function success(midiAccess) {\r\n      midiAccess.onstatechange = updateDevices;\r\n\r\n      const inputs = midiAccess.inputs;\r\n\r\n      inputs.forEach((input) => {\r\n        input.onmidimessage = handleInput;\r\n      });\r\n    }\r\n\r\n    function failure() {\r\n      console.log('Could not connect MIDI');\r\n    }\r\n\r\n    function updateDevices(event) {\r\n      console.log(\r\n        `Name: ${event.port.name}, Brand: ${event.port.manufacturer}, State: ${event.port.state}, Type: ${event.port.type}`\r\n      );\r\n    }\r\n  }, []);\r\n\r\n  //Init user pcv examples\r\n  useEffect(() => {\r\n    handleSubmitPitchClass('{0,4,7}{0,3,7}{0,3,6}'); // C Cmin Cdim\r\n    userPcvs[1].isDisabled = true;\r\n    userPcvs[2].isDisabled = true;\r\n    setUserPcvs([...userPcvs]);\r\n  }, []);\r\n\r\n  function toggleShowPrototypes() {\r\n    setShowPrototypes(!showPrototypes);\r\n  }\r\n\r\n  function retriggerAnalysis() {\r\n    //Only if there is midi data, retrigger analysis\r\n    if (currentSongMidiData == null) {\r\n      return;\r\n    }\r\n\r\n    //Circles dynamic analysis\r\n    let { tracesData, resolution } = getDftCoeffDynamic(\r\n      currentSongMidiData,\r\n      resolutionMode,\r\n      currentSongBPM\r\n    );\r\n    setCoeffTracesData(tracesData);\r\n    setPlayerMidiData(currentSongMidiData, resolution, setCurrentSubdiv);\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <Player />\r\n      <PcvChipsBox userPcvs={userPcvs} setUserPcvs={setUserPcvs} />\r\n\r\n      <FormGroup>\r\n        <FormControlLabel\r\n          control={\r\n            <Switch\r\n              onChange={() => toggleShowPrototypes()}\r\n              checked={showPrototypes}\r\n            />\r\n          }\r\n          label='Show Prototypes'\r\n        />\r\n      </FormGroup>\r\n\r\n      <Box\r\n        component='form'\r\n        sx={{\r\n          '& > :not(style)': { m: 1, width: '25ch' },\r\n        }}\r\n        noValidate\r\n        autoComplete='off'\r\n      >\r\n        <TextField\r\n          error={isInputPcvInvalid}\r\n          helperText={isInputPcvInvalid && 'Invalid input'}\r\n          id='outlined-basic'\r\n          label='Pitch class vector'\r\n          variant='outlined'\r\n          onKeyPress={(event) => {\r\n            if (event.key === 'Enter') {\r\n              handleSubmitPitchClass(pcvTextRef.current.value);\r\n              pcvTextRef.current.value = '';\r\n            }\r\n          }}\r\n          onChange={() => {\r\n            setIsInputPcvInvalid(false);\r\n          }}\r\n          inputRef={pcvTextRef}\r\n        />\r\n      </Box>\r\n\r\n      <div>\r\n        <label htmlFor='file'>\r\n          <input\r\n            style={{ display: 'none' }}\r\n            type='file'\r\n            id='file'\r\n            name='file'\r\n            value={file}\r\n            onChange={(e) => setFile(e.target.value)}\r\n          />\r\n          <Button variant='contained' color='primary' component='span'>\r\n            Upload MIDI\r\n          </Button>\r\n        </label>\r\n      </div>\r\n\r\n      <ResolutionSelector\r\n        setResolutionMode={setResolutionMode}\r\n        resolutionMode={resolutionMode}\r\n      />\r\n      <Button variant='contained' color='primary' onClick={retriggerAnalysis}>\r\n        Change resolution\r\n      </Button>\r\n\r\n      <Container>\r\n        <Divider />\r\n        <WavescapeModule wavescapesData={wavescapesData} />\r\n        <Divider />\r\n        <CoefficientsModule\r\n          coeffTracesData={coeffTracesData}\r\n          currentSubdiv={currentSubdiv}\r\n          showPrototypes={showPrototypes}\r\n          userPcvs={userPcvs}\r\n          midiDevNotesDftCoeffs={midiDevNotesDftCoeffs}\r\n        />\r\n      </Container>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Application;\r\n","export default function parse(input) {\r\n  let pcvs = [];\r\n  //Vectorial notation, distribution -> real numbers\r\n  const openVect = '(';\r\n  const closeVect = ')';\r\n  //Set notation, integers\r\n  const openSet = '{';\r\n  const closeSet = '}';\r\n  //Number divider\r\n  const divider = ',';\r\n\r\n  let isGroup = false;\r\n  let isSet = false;\r\n\r\n  for (let i = 0; i < input.length; i++) {\r\n    if (input[i] === openSet || input[i] === openVect) {\r\n      isGroup = true;\r\n      if (input[i] === openSet) isSet = true;\r\n    }\r\n\r\n    if (isGroup) {\r\n      let stringGroup = [];\r\n      //Slice the current group\r\n      for (\r\n        let j = i + 1;\r\n        input[j] !== closeSet && input[j] !== closeVect;\r\n        j++\r\n      ) {\r\n        //Check if there is an invalid char in the group\r\n        if (input[j] !== ',' && input[j] !== '.' && isNaN(parseFloat(input[j])))\r\n          throw new Error('Found NaN');\r\n        stringGroup.push(input[j]);\r\n      }\r\n\r\n      stringGroup = stringGroup.join('');\r\n\r\n      //Check if the empty string\r\n      if (stringGroup === '') throw new Error('Empty input');\r\n\r\n      let numeralInput = [];\r\n      let count = 0;\r\n      for (let j = 0; j < stringGroup.length; j++) {\r\n        if (stringGroup[j] === divider) {\r\n          let num = stringGroup.slice(j - count, j);\r\n          //if num.length === 0 => two consecutive comas, invalid input\r\n          if (num.length === 0) throw new Error('Two consecutive comas');\r\n\r\n          numeralInput.push(+num);\r\n          count = -1;\r\n        }\r\n        count++;\r\n      }\r\n      //Last element not cover by the for cycle\r\n      let lastNum = stringGroup.slice(\r\n        stringGroup.length - count,\r\n        stringGroup.length\r\n      );\r\n      //Check if there is a last number\r\n      if (lastNum.length === 0) {\r\n        throw new Error('Missing last number');\r\n      }\r\n      numeralInput.push(+lastNum);\r\n\r\n      if (isSet) {\r\n        let bin = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\r\n        for (let i = 0; i < numeralInput.length; i++) {\r\n          //Set notation: check if num is valid range [0,11]\r\n          if (numeralInput[i] < 0 || numeralInput[i] >= 12) {\r\n            throw new Error('Set notation: out of range');\r\n          }\r\n\r\n          bin[numeralInput[i]] += 1;\r\n        }\r\n        pcvs.push(bin);\r\n      } else {\r\n        //If is in vectorial form, check if there are 12 elements\r\n        if (numeralInput.length !== 12) {\r\n          throw new Error('Vectorial notation: missing elements');\r\n        }\r\n        pcvs.push(numeralInput);\r\n      }\r\n\r\n      isGroup = false;\r\n      isSet = false;\r\n      i += count;\r\n    }\r\n  }\r\n\r\n  if (pcvs.length === 0) throw new Error('Invalid input');\r\n\r\n  return pcvs;\r\n}\r\n","import Navbar from './Navbar';\r\nimport { HashRouter, Route, Switch } from 'react-router-dom';\r\nimport CssBaseline from '@mui/material/CssBaseline';\r\n\r\n//Pages\r\nimport Home from './pages/Home';\r\nimport Theory from './pages/Theory';\r\nimport Application from './pages/Application';\r\n\r\nfunction App() {\r\n  return (\r\n    <>\r\n      <CssBaseline />\r\n      <HashRouter basename={process.env.PUBLIC_URL}>\r\n        <Navbar />\r\n        <Switch>\r\n          <Route exact path='/' component={Home}></Route>\r\n          <Route exact path='/theory' component={Theory}></Route>\r\n          <Route exact path='/analysis' component={Application}></Route>\r\n        </Switch>\r\n      </HashRouter>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}